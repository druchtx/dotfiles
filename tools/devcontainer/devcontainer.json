{
  "name": "",
  "image": "mcr.microsoft.com/devcontainers/base:2.1.3-debian12",
  // "build": {
  //   "dockerfile": "${localEnv:DOTFILES_ROOT}/tools/devcontainer/Dockerfile",
  //   "context": "${localEnv:DOTFILES_ROOT}",
  //   "options": [
  //     "--no-cache"
  //   ]
  // },
  "workspaceMount": "source=${localWorkspaceFolder},target=/home/vscode/Workspace,type=bind,consistency=cached",
  "workspaceFolder": "/home/vscode/Workspace",
  "runArgs": [
    "--name",
    "devcontainer"
  ],
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "configureZshAsDefaultShell": true,
      "installOhMyZsh": false,
      "installOhMyZshConfig": false
    }
  },
  "onCreateCommand": "docker volume create ssh-keys && docker run --rm -v ssh-keys:/ssh -v ${localEnv:HOME}/.ssh:/host-ssh alpine sh -c 'cp -r /host-ssh/* /ssh/ && chmod 600 /ssh/id_ed25519'",
  //config dotfiles
  "postCreateCommand": "bash -c 'if [ ! -d ~/.dotfiles ]; then git clone https://github.com/druchtx/dotfiles ~/.dotfiles; fi && cd ~/.dotfiles && ./bootstrap && ./bin/dot link'",
  "remoteUser": "vscode",
  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.shell.linux": "/bin/zsh"
      },
      "extensions": [
        "rooveterinaryinc.roo-cline",
        "vscodevim.vim"
      ]
    }
  },
  "mounts": [
    "source=vol-vsc-dc,target=/home/vscode,type=volume",
    "source=${localEnv:HOME}/.localrc,target=/home/vscode/.localrc,type=bind",
    "source=ssh-keys,target=/home/vscode/.ssh,type=volume"
  ]
}